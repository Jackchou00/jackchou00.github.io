<!DOCTYPE html>
<html lang="en"
    dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Principles of Colour Reproduction in Digital Images Notes: Introduction | JacksBlog</title>
<meta name="keywords" content="Colour Science, Colour Reproduction, Digital Camera Colour Processing, Display Device Colour Rendering, Colour Appearance Models, Chromatic Adaptation Transforms, CIE Standard Colorimetric System, Digital Colour Management Systems">
<meta name="description" content="Systematic guide to digital color reproduction, colorimetry, and ICC/ACES color management, based on Principles of Colour Reproduction in Digital Images.">
<meta name="author" content="Miaosen Zhou">
<link rel="canonical" href="https://jackchou.top/en/posts/pcrdi00/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e30af01949f15b214a659db89950589c44040efcfcdeec2087ad8629d77c216e.css" integrity="sha256-4wrwGUnxWyFKZZ24mVBYnEQEDvz83uwgh62GKdd8IW4=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jackchou.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jackchou.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jackchou.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jackchou.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://jackchou.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://jackchou.top/posts/pcrdi00/">
<link rel="alternate" hreflang="en" href="https://jackchou.top/en/posts/pcrdi00/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Google&#43;Sans&#43;Code:wght@400..700&amp;family=Noto&#43;Sans&#43;SC:wght@400..700&amp;family=Sen:wght@400..700&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Google&#43;Sans&#43;Code:wght@400..700&amp;family=Noto&#43;Sans&#43;SC:wght@400..700&amp;family=Sen:wght@400..700&amp;display=swap" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Google&#43;Sans&#43;Code:wght@400..700&amp;family=Noto&#43;Sans&#43;SC:wght@400..700&amp;family=Sen:wght@400..700&amp;display=swap"></noscript>
<meta property="og:url" content="https://jackchou.top/en/posts/pcrdi00/">
  <meta property="og:site_name" content="JacksBlog">
  <meta property="og:title" content="Principles of Colour Reproduction in Digital Images Notes: Introduction">
  <meta property="og:description" content="Systematic guide to digital color reproduction, colorimetry, and ICC/ACES color management, based on Principles of Colour Reproduction in Digital Images.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-20T18:00:00+08:00">
    <meta property="article:modified_time" content="2025-07-20T01:27:54+08:00">
    <meta property="article:tag" content="Colour">
    <meta property="article:tag" content="PCRDI">
      <meta property="og:image" content="https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp">
<meta name="twitter:title" content="Principles of Colour Reproduction in Digital Images Notes: Introduction">
<meta name="twitter:description" content="Systematic guide to digital color reproduction, colorimetry, and ICC/ACES color management, based on Principles of Colour Reproduction in Digital Images.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts üå≥",
      "item": "https://jackchou.top/en/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Principles of Colour Reproduction in Digital Images Notes: Introduction",
      "item": "https://jackchou.top/en/posts/pcrdi00/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Principles of Colour Reproduction in Digital Images Notes: Introduction",
  "name": "Principles of Colour Reproduction in Digital Images Notes: Introduction",
  "description": "Systematic guide to digital color reproduction, colorimetry, and ICC/ACES color management, based on Principles of Colour Reproduction in Digital Images.",
  "keywords": [
    "Colour Science", "Colour Reproduction", "Digital Camera Colour Processing", "Display Device Colour Rendering", "Colour Appearance Models", "Chromatic Adaptation Transforms", "CIE Standard Colorimetric System", "Digital Colour Management Systems"
  ],
  "articleBody": "About the Book Thanks to Daniel_Li for recommending this book in the group.\nI consider this an excellent introductory text on colour science. It systematically presents the framework and key concepts of colour science with minimal verbosity, resulting in a concise volume.\nThough not without issues ‚Äì such as substantial content overlap with Professor Xu Haisong‚Äôs Colour Information Engineering, disorganised sequencing of topics, and various minor flaws ‚Äì it remains one of the better textbooks and reference works I‚Äôve encountered within China.\nTitle: Principles of Colour Reproduction in Digital Images (Êï∞Â≠óÂΩ±ÂÉèÈ¢úËâ≤ÂÜçÁé∞ÂéüÁêÜ)\nAuthor: Gu Xiaojuan (È°æÊôìÂ®ü) ISBN: 978-7-115-61746-0\nPlan The plan involves distilling and summarising each chapter‚Äôs content, reproducing key algorithms, providing expanded references, and completing selected exercises.\nThe current abbreviation used is PCRDI (Principles of Colour Reproduction in Digital Images).\nContents The notes follow the book‚Äôs chapter structure, so here‚Äôs a brief overview of its contents.\nLight and Vision Serves as an introductory chapter covering fundamental concepts of light and vision, with particular emphasis on photometry.\nFundamentals of Colorimetry Introduces colour matching experiments and derives the CIE standard colorimetric system (tristimulus values, colour coordinates, etc.). Briefly covers uniform colour spaces and the Munsell colour system, followed by colour difference formulae.\nIlluminants and Light Sources Presents common light sources in colour science and their evaluation methods, including CIE standard illuminants, colour rendering assessment, and light quality metrics.\nChromatic Adaptation and Chromatic Adaptation Transforms Building upon light sources and colorimetry fundamentals, this chapter explores human chromatic adaptation phenomena and key adaptation models, laying groundwork for colour appearance models.\nColour Appearance Phenomena and Colour Appearance Models Since basic colorimetry inadequately describes subjective colour perception, colour appearance attributes are crucial.\nCovers colour appearance attributes and common phenomena, followed by significant colour appearance models.\nColour Measurement and Colorimetric Instruments This chapter spans merely four pages\nAs colour science seldom focuses on measurement specifics (spectral separation, sensor technology), it briefly introduces common colorimetric instruments and their basic principles.\nColour Reproduction Colour reproduction represents the ultimate goal of production workflows.\nLeveraging previously introduced models and methods, this chapter covers evaluation metrics and specialised concepts in colour reproduction.\nColour Information Processing in Digital Cameras Explains camera operational principles and characterisation methods.\nProvides detailed coverage of demosaic algorithms and white balance techniques.\nColour Information Processing in Display Devices Examines display device fundamentals and colour rendering workflows. Includes thorough explanations of colour mixing methods for multi-primary displays.\nDigital Colour Management Systems Introduces colour management systems (e.g., ICC, ACES) as comprehensive applications of all preceding concepts.\n",
  "wordCount" : "415",
  "inLanguage": "en",
  "image": "https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp","datePublished": "2025-01-20T18:00:00+08:00",
  "dateModified": "2025-07-20T01:27:54+08:00",
  "author":{
    "@type": "Person",
    "name": "Miaosen Zhou"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jackchou.top/en/posts/pcrdi00/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "JacksBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jackchou.top/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jackchou.top/en/" accesskey="h" title="JacksBlog (Alt + H)">JacksBlog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://jackchou.top/" title="‰∏≠Êñá"
                            aria-label="‰∏≠Êñá">‰∏≠Êñá</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jackchou.top/en/posts/" title="Posts üå≥">
                    <span>Posts üå≥</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/en/photos/" title="Photos üì∑">
                    <span>Photos üì∑</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/en/tags/" title="Tags üè∑Ô∏è">
                    <span>Tags üè∑Ô∏è</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/en/about/" title="About üòº">
                    <span>About üòº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Principles of Colour Reproduction in Digital Images Notes: Introduction
    </h1>
    
    <div class="post-meta"><span title='2025-01-20 18:00:00 +0800 +0800'>2025.01.20</span>&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="https://jackchou.top/posts/pcrdi00/">‰∏≠Êñá</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#about-the-book" aria-label="About the Book">About the Book</a></li>
                <li>
                    <a href="#plan" aria-label="Plan">Plan</a></li>
                <li>
                    <a href="#contents" aria-label="Contents">Contents</a><ul>
                        
                <li>
                    <a href="#light-and-vision" aria-label="Light and Vision">Light and Vision</a></li>
                <li>
                    <a href="#fundamentals-of-colorimetry" aria-label="Fundamentals of Colorimetry">Fundamentals of Colorimetry</a></li>
                <li>
                    <a href="#illuminants-and-light-sources" aria-label="Illuminants and Light Sources">Illuminants and Light Sources</a></li>
                <li>
                    <a href="#chromatic-adaptation-and-chromatic-adaptation-transforms" aria-label="Chromatic Adaptation and Chromatic Adaptation Transforms">Chromatic Adaptation and Chromatic Adaptation Transforms</a></li>
                <li>
                    <a href="#colour-appearance-phenomena-and-colour-appearance-models" aria-label="Colour Appearance Phenomena and Colour Appearance Models">Colour Appearance Phenomena and Colour Appearance Models</a></li>
                <li>
                    <a href="#colour-measurement-and-colorimetric-instruments" aria-label="Colour Measurement and Colorimetric Instruments">Colour Measurement and Colorimetric Instruments</a></li>
                <li>
                    <a href="#colour-reproduction" aria-label="Colour Reproduction">Colour Reproduction</a></li>
                <li>
                    <a href="#colour-information-processing-in-digital-cameras" aria-label="Colour Information Processing in Digital Cameras">Colour Information Processing in Digital Cameras</a></li>
                <li>
                    <a href="#colour-information-processing-in-display-devices" aria-label="Colour Information Processing in Display Devices">Colour Information Processing in Display Devices</a></li>
                <li>
                    <a href="#digital-colour-management-systems" aria-label="Digital Colour Management Systems">Digital Colour Management Systems</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="about-the-book">About the Book<a hidden class="anchor" aria-hidden="true" href="#about-the-book">#</a></h2>
<p>Thanks to Daniel_Li for recommending this book in the group.</p>
<p>I consider this an excellent introductory text on colour science. It systematically presents the framework and key concepts of colour science with minimal verbosity, resulting in a concise volume.</p>
<p>Though not without issues ‚Äì such as substantial content overlap with Professor Xu Haisong&rsquo;s <em>Colour Information Engineering</em>, disorganised sequencing of topics, and various minor flaws ‚Äì it remains one of the better textbooks and reference works I&rsquo;ve encountered within China.</p>
<p>Title: Principles of Colour Reproduction in Digital Images (Êï∞Â≠óÂΩ±ÂÉèÈ¢úËâ≤ÂÜçÁé∞ÂéüÁêÜ)<br>
Author: Gu Xiaojuan (È°æÊôìÂ®ü) <br>
ISBN: 978-7-115-61746-0</p>
<h2 id="plan">Plan<a hidden class="anchor" aria-hidden="true" href="#plan">#</a></h2>
<p>The plan involves distilling and summarising each chapter&rsquo;s content, reproducing key algorithms, providing expanded references, and completing selected exercises.</p>
<p>The current abbreviation used is PCRDI (Principles of Colour Reproduction in Digital Images).</p>
<h2 id="contents">Contents<a hidden class="anchor" aria-hidden="true" href="#contents">#</a></h2>
<p>The notes follow the book&rsquo;s chapter structure, so here&rsquo;s a brief overview of its contents.</p>
<h3 id="light-and-vision">Light and Vision<a hidden class="anchor" aria-hidden="true" href="#light-and-vision">#</a></h3>
<p>Serves as an introductory chapter covering fundamental concepts of light and vision, with particular emphasis on photometry.</p>
<h3 id="fundamentals-of-colorimetry">Fundamentals of Colorimetry<a hidden class="anchor" aria-hidden="true" href="#fundamentals-of-colorimetry">#</a></h3>
<p>Introduces colour matching experiments and derives the CIE standard colorimetric system (tristimulus values, colour coordinates, etc.). Briefly covers uniform colour spaces and the Munsell colour system, followed by colour difference formulae.</p>
<h3 id="illuminants-and-light-sources">Illuminants and Light Sources<a hidden class="anchor" aria-hidden="true" href="#illuminants-and-light-sources">#</a></h3>
<p>Presents common light sources in colour science and their evaluation methods, including CIE standard illuminants, colour rendering assessment, and light quality metrics.</p>
<h3 id="chromatic-adaptation-and-chromatic-adaptation-transforms">Chromatic Adaptation and Chromatic Adaptation Transforms<a hidden class="anchor" aria-hidden="true" href="#chromatic-adaptation-and-chromatic-adaptation-transforms">#</a></h3>
<p>Building upon light sources and colorimetry fundamentals, this chapter explores human chromatic adaptation phenomena and key adaptation models, laying groundwork for colour appearance models.</p>
<h3 id="colour-appearance-phenomena-and-colour-appearance-models">Colour Appearance Phenomena and Colour Appearance Models<a hidden class="anchor" aria-hidden="true" href="#colour-appearance-phenomena-and-colour-appearance-models">#</a></h3>
<p>Since basic colorimetry inadequately describes subjective colour perception, colour appearance attributes are crucial.<br>
Covers colour appearance attributes and common phenomena, followed by significant colour appearance models.</p>
<h3 id="colour-measurement-and-colorimetric-instruments">Colour Measurement and Colorimetric Instruments<a hidden class="anchor" aria-hidden="true" href="#colour-measurement-and-colorimetric-instruments">#</a></h3>
<p><em>This chapter spans merely four pages</em></p>
<p>As colour science seldom focuses on measurement specifics (spectral separation, sensor technology), it briefly introduces common colorimetric instruments and their basic principles.</p>
<h3 id="colour-reproduction">Colour Reproduction<a hidden class="anchor" aria-hidden="true" href="#colour-reproduction">#</a></h3>
<p>Colour reproduction represents the ultimate goal of production workflows.<br>
Leveraging previously introduced models and methods, this chapter covers evaluation metrics and specialised concepts in colour reproduction.</p>
<h3 id="colour-information-processing-in-digital-cameras">Colour Information Processing in Digital Cameras<a hidden class="anchor" aria-hidden="true" href="#colour-information-processing-in-digital-cameras">#</a></h3>
<p>Explains camera operational principles and characterisation methods.<br>
Provides detailed coverage of demosaic algorithms and white balance techniques.</p>
<h3 id="colour-information-processing-in-display-devices">Colour Information Processing in Display Devices<a hidden class="anchor" aria-hidden="true" href="#colour-information-processing-in-display-devices">#</a></h3>
<p>Examines display device fundamentals and colour rendering workflows. Includes thorough explanations of colour mixing methods for multi-primary displays.</p>
<h3 id="digital-colour-management-systems">Digital Colour Management Systems<a hidden class="anchor" aria-hidden="true" href="#digital-colour-management-systems">#</a></h3>
<p>Introduces colour management systems (e.g., ICC, ACES) as comprehensive applications of all preceding concepts.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://jackchou.top/en/tags/colour/">Colour</a></li>
      <li><a href="https://jackchou.top/en/tags/pcrdi/">PCRDI</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://jackchou.top/en/posts/pcrdi01/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>Principles of Colour Reproduction in Digital Images Notes: Light and Vision</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jackchou.top/en/">JacksBlog</a></span> ¬∑ 
        my friends&rsquo; websites: <a href="https://zhxwu.com/">zhxwu.com</a>, <a href="https://ylqian.com/">ylqian.com</a> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div style="text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;">
    <img src="https://visitor-badge.laobi.icu/badge?page_id=jacksblog" alt="visitors" width="88" height="20" style="height: auto;" loading="lazy" />
</div><script>
(() => {
    const images = document.querySelectorAll('.post-content img');
    if (!images.length) return;

    const overlay = document.createElement('div');
    overlay.className = 'image-lightbox';
    overlay.innerHTML = '<img class="image-lightbox__img" alt="" />';

    const overlayImg = overlay.querySelector('img');
    const closeOverlay = () => {
        overlay.classList.remove('is-visible');
        overlayImg.removeAttribute('src');
        document.body.style.removeProperty('overflow');
    };

    overlay.addEventListener('click', closeOverlay);
    document.addEventListener('keyup', (event) => {
        if (event.key === 'Escape' && overlay.classList.contains('is-visible')) {
            closeOverlay();
        }
    });

    document.body.appendChild(overlay);

    images.forEach((img) => {
        img.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();

            const source = img.dataset.zoomSrc || img.currentSrc || img.src;
            const cleanSrc = source.split('#')[0];

            overlayImg.src = cleanSrc;
            overlayImg.alt = img.alt || '';

            overlay.classList.add('is-visible');
            document.body.style.setProperty('overflow', 'hidden');
        });
    });
})();
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
