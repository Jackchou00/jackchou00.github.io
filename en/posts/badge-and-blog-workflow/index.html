<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Add a Little Gadget, and Talk About How I Update My Articles | ğŸ¡JacksBlog</title>
<meta name="keywords" content="Hugo, Code, PaperMod, Anything, LLM">
<meta name="description" content="Using a badge to roughly show visitor count, and my general process for updating blog posts">
<meta name="author" content="Jack">
<link rel="canonical" href="https://jackchou.top/en/posts/badge-and-blog-workflow/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3e012cc221fccf5fda0eb1cb0851a29dbf3f55bb95f650a78d3081251e47486a.css" integrity="sha256-PgEswiH8z1/aDrHLCFGinb8/VbuV9lCnjTCBJR5HSGo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jackchou.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jackchou.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jackchou.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jackchou.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://jackchou.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://jackchou.top/posts/badge-and-blog-workflow/">
<link rel="alternate" hreflang="en" href="https://jackchou.top/en/posts/badge-and-blog-workflow/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js" integrity="sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Google+Sans+Code:ital,wght@0,300..800;1,300..800&family=Noto+Sans+SC:wght@100..900&family=Sen:wght@400..800&display=swap" rel="stylesheet"><meta property="og:url" content="https://jackchou.top/en/posts/badge-and-blog-workflow/">
  <meta property="og:site_name" content="ğŸ¡JacksBlog">
  <meta property="og:title" content="Add a Little Gadget, and Talk About How I Update My Articles">
  <meta property="og:description" content="Using a badge to roughly show visitor count, and my general process for updating blog posts">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-04T02:00:00+08:00">
    <meta property="article:modified_time" content="2025-08-04T02:00:00+08:00">
    <meta property="article:tag" content="Hugo">
    <meta property="article:tag" content="Code">
    <meta property="article:tag" content="PaperMod">
    <meta property="article:tag" content="Anything">
    <meta property="article:tag" content="LLM">
      <meta property="og:image" content="https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp">
<meta name="twitter:title" content="Add a Little Gadget, and Talk About How I Update My Articles">
<meta name="twitter:description" content="Using a badge to roughly show visitor count, and my general process for updating blog posts">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts ğŸŒ³",
      "item": "https://jackchou.top/en/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Add a Little Gadget, and Talk About How I Update My Articles",
      "item": "https://jackchou.top/en/posts/badge-and-blog-workflow/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Add a Little Gadget, and Talk About How I Update My Articles",
  "name": "Add a Little Gadget, and Talk About How I Update My Articles",
  "description": "Using a badge to roughly show visitor count, and my general process for updating blog posts",
  "keywords": [
    "Hugo", "Code", "PaperMod", "Anything", "LLM"
  ],
  "articleBody": "How I update Hugo is a tool that converts Markdown files into static HTML pages. In theory, you just create or edit Markdown, then run hugo and itâ€™s done. In practice, there are some tiny details worth sharing.\nGithub Actions For convenience, my blog uses two repos: one stores Markdown and the Hugo theme and other files; the other stores the generated site files (i.e., Github Pages). The first repo has Github Actions that run the hugo command, build static pages, then push to the second repo.\nThe Action is triggered whenever commits are pushed to the main branch. Each run takes about a minute. With 3,000 Action minutes per month on Github, Iâ€™ll never run out.\nDraft Sometimes a post is half-written or I donâ€™t want to publish it yet. In that case I set draft to true in the front matter, so hugo wonâ€™t build it. But if itâ€™s in main, it still triggers the Actionâ€”even though nothing changes. So I made a draft branch to keep those posts. That way I can use Git like cloud sync and also avoid triggering the Action.\nLLM post-processing After I finish the draft, Iâ€™ll have AI read and check itâ€”like spotting typos, checking fluency, and giving suggestions (which I mostly skim, or let models like GPT-4o say some nice words). If I havenâ€™t written the summary, description, or even the title yet, Iâ€™ll ask it for optionsâ€”though most of the time theyâ€™re not that useful.\nI use GPT 4.1 for this step. Stronger models are fine too, but LLMs arenâ€™t great at precisely controlling the word count of the generated text.\nè¾“å…¥å°†ä¼šæ˜¯å®Œæ•´çš„ markdownï¼Œæ˜¯ç”±ç®€ä½“ä¸­æ–‡åˆ›ä½œçš„ä¸ªäººåšå®¢çš„ä¸€ç¯‡æ–‡ç« ã€‚ ä½ éœ€è¦é¦–å…ˆæŸ¥çœ‹æ˜¯å¦å­˜åœ¨é”™åˆ«å­—ã€é”™è¯¯çš„ç”¨è¯å’Œç”¨è¯­ï¼Œè¡¨è¿°ä¸æ¸…æ™°ï¼Œä¸é€šé¡ºçš„åœ°æ–¹ã€‚æ¸…æ™°çš„æŒ‡å‡ºåœ¨ä½•å¤„ã€æœ‰ä»€ä¹ˆé—®é¢˜ã€å¦‚ä½•ä¿®æ”¹ã€‚æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ªäººåšå®¢ï¼Œé€‚å½“çš„å£è¯­åŒ–æ˜¯å¯æ¥å—çš„ï¼Œä½†ä¸èƒ½å†’çŠ¯ã€‚ ç„¶åï¼Œä½ éœ€è¦ç»“åˆä½ çš„çŸ¥è¯†å’Œç†è§£ï¼Œä»”ç»†çš„é˜…è¯»æ–‡ç« å†…å®¹ï¼Œç»™å‡ºä¸€äº›å†…å®¹ä¸Šçš„å»ºè®®å’Œè¯»åæ„Ÿã€‚ æœ€åï¼Œä½ éœ€è¦ç»“åˆå†…å®¹å’Œä½ çš„ç†è§£ï¼Œç»™å‡ºå‡ ä¸ª front éƒ¨åˆ†çš„ titleï¼Œsummary å’Œ description çš„å¤‡é€‰é¡¹ï¼Œç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š - titleï¼šè¿™å°†æ˜¯æ˜¾ç¤ºåœ¨æ–‡ç« åˆ—è¡¨ä¸­å’Œæ–‡ç« é¡¶éƒ¨çš„â€œæ ‡é¢˜â€ï¼Œæœ€å¥½ä¸è¶…è¿‡ 25 ä¸ªæ±‰å­—ã€‚ - summaryï¼šè¿™å°†æ˜¯æ˜¾ç¤ºåœ¨æ–‡ç« åˆ—è¡¨ä¸­ï¼Œæ ‡é¢˜ä¸‹æ–¹çš„æ–‡ç« â€œæ€»ç»“â€æˆ–â€œå‰¯æ ‡é¢˜â€ï¼Œæ—¢è¡¥å……è¯´æ˜æ ‡é¢˜ï¼Œåˆä»£è¡¨æ–‡ç« å†…å®¹ï¼Œæœ€å¥½ä¸è¶…è¿‡ 50 ä¸ªæ±‰å­—ã€‚ - descriptionï¼šè¿™å°†æ˜¾ç¤ºåœ¨æ–‡ç« é¡µé¢çš„æ ‡é¢˜ä¸‹æ–¹ç¬¬ä¸€æ®µï¼Œæ˜¯â€œæ‘˜è¦â€ï¼Œæ˜¯å¼€å¤´å’Œé¢„å‘Šå…¨æ–‡ã€‚æœ€å¥½ä¸è¶…è¿‡ 80 ä¸ªæ±‰å­—ã€‚ ä»¥åŠï¼Œç»™å‡ºä¸€ä¸ªæ–‡ä»¶åï¼Œå®ƒå°†ä½œä¸ºè¯¥æ–‡ç« çš„ URLï¼Œæ¯”å¦‚ xxx.mdï¼Œå°†ä¼šæˆä¸º baseURL/posts/xxx After the Chinese version is done, for a bit of internationalization, I also generate an English version. In Hugo, you just create a file with the same name xxx.en.md. The English draft is also written by an LLM. If the post is about color science, Iâ€™ll provide a glossary to help the AI with terms. Aside from a few similar terms (which we often donâ€™t strictly distinguish anyway), larger models translate quite well. Good options include Gemini 2.5 Pro and DeepSeek R1-0528; the latter sometimes gives better translation quality, but it may alter format and paragraphs. After translating, Iâ€™ll read it once and make small edits if I have time.\nRecentlt, A model named Horizon on OpenRouter also works very well for this task. Update: Horizon appears to be gpt-5-mini, while gpt-5 performs relatively well on both tasks.\nHereâ€™s the prompt I use. Supposedly, for reasoning models, a clear prompt is enough, you donâ€™t need a super complicated one:\nI found that OpenAI has a Prompt Optimizer. Itâ€™s kind of like ByteDanceâ€™s old Prompt Pilot. Here is a prompt tuned for GPT-5 but works fine with other models too.\nè¾“å…¥å†…å®¹ä¸ºå®Œæ•´çš„ Markdownï¼Œå†…å®¹ä¸ºç®€ä½“ä¸­æ–‡åˆ›ä½œçš„ä¸ªäººåšå®¢æ–‡ç« ã€‚ ä½ çš„ä»»åŠ¡æ˜¯å°†å†…å®¹ç¿»è¯‘ä¸ºè‹±æ–‡ï¼Œç”Ÿæˆå¯¹åº”çš„è‹±æ–‡ç‰ˆæœ¬ã€‚ è¦æ±‚ï¼š 1. ä¿æŒåŸæœ‰æ ¼å¼å’Œæ®µè½å®Œå…¨ä¸å˜ã€‚ 2. è¯‘æ–‡è¡¨è¾¾éœ€è‡ªç„¶ã€è´´è¿‘æ—¥å¸¸ä¹ æƒ¯ï¼Œé¿å…ç”Ÿåƒ»æˆ–ä¸å¸¸ç”¨è¡¨è¾¾ã€‚ 3. ä¿æŒ Markdown è¯­æ³•ï¼Œå›¾ç‰‡é“¾æ¥å’Œä»£ç éƒ¨åˆ†åªéœ€ç¿»è¯‘å›¾ç‰‡æè¿°å’Œæ³¨é‡Šã€‚ 4. ä¿æŒåŸæ–‡è¯­æ°”å’Œé£æ ¼ï¼Œç½‘ç»œç”¨è¯­å’Œä¿šè¯­éœ€å‡†ç¡®å¯¹åº”ã€‚ åœ¨å¼€å§‹ç¿»è¯‘å‰ï¼Œç”Ÿæˆä¸€ä»½ 3-5 æ­¥çš„ç®€è¦ä»»åŠ¡æ¸…å•ã€‚ ç¿»è¯‘å®Œæˆåä»…è¾“å‡ºè‹±æ–‡å†…å®¹ï¼Œä¾¿äºç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œæ— éœ€åŒ…å«å…¶ä»–ä¿¡æ¯ã€‚ é‡åˆ°ä¸“ä¸šæœ¯è¯­æ—¶ï¼Œä»¥ä¸‹æ˜¯ä¾›ä½ å‚è€ƒçš„è¯å…¸ï¼š - äº®åº¦ï¼šLuminance - æ˜åº¦ï¼šLightness - è§†æ˜åº¦ï¼šBrightness Sometimes you need to update a post after itâ€™s published. After adding or editing the Chinese version, how do you update it while keeping everything else unchanged, and still make the updates blend in naturally? A one-shot chat with an LLM usually wonâ€™t cut it. The best way is to lean on an agent, such as GitHub Copilot or Codex, with a tiny bit of guidance.\nä½¿ç”¨ `git diff` æ£€æŸ¥æˆ‘å¯¹æ–‡ä»¶ `ccontent\\posts\\badge-and-blog-workflow.md` åšçš„æ›´æ”¹ï¼Œä¾æ®ä»¥ä¸‹è§„åˆ™ï¼Œå°†ä¿®æ”¹åŒæ­¥åˆ°è‹±æ–‡ç‰ˆçš„æ–‡ç« ä¸­ `content\\posts\\badge-and-blog-workflow.en.md`ï¼Œåªä¿®æ”¹æœ‰æ”¹åŠ¨çš„éƒ¨åˆ†ï¼Œä¿æŒå…¶ä»–éƒ¨åˆ†ä¸å˜ï¼Œè¦æ±‚é£æ ¼ä¸åŸæœ¬æ¥è¿‘ã€‚ ç¿»è¯‘è§„åˆ™ï¼š 1. ä¿æŒæ ¼å¼å’Œæ®µè½ä¸¥æ ¼ä¸å˜ã€‚ 2. æ³¨æ„ç”¨è¯­å’Œç”¨è¯ï¼Œä¸è¦å‡ºç°ç”Ÿåƒ»çš„å•è¯ï¼Œç¬¦åˆæ—¥å¸¸ä¹ æƒ¯ã€‚ 3. ä¿æŒ markdown è¯­æ³•ï¼Œå›¾ç‰‡é“¾æ¥ã€ä»£ç éƒ¨åˆ†åªè¦ç¿»è¯‘å›¾ç‰‡æè¿°å’Œæ³¨é‡Šã€‚ 4. ä¿æŒè¯­æ°”ï¼Œä½¿ç”¨çš„ä¿šè¯­å’Œç½‘ç»œç”¨è¯­éœ€è¦å‡†ç¡®çš„ç¿»è¯‘ã€‚ It will read the files, run commands to view the diffs, and accurately translate only the changed parts.\nA Badge for visitor stats Source Found this little gadget while surfing: show visitor counts through a Badge, like on this site. Did some digging and found itâ€™s just an image; each load increments a counter by 1.\nThe image comes from visitor-badge.laobi.icu, a free service. You only need an image URL.\nThe image link format is below. Replace page.id with a unique string. Iâ€™m using jacksblog nowâ€”just avoid collisions. Super convenient. To reset the count, just swap in a new string.\nhttps://visitor-badge.laobi.icu/badge?page_id=page.id\nOf course, this is just a fun toy. Every image load increments the counter. If you add it to the footer like I did, it shows on every page. This way, from visiting the homepage, to entering the article list, to opening a specific article, the counter might increase three times. Additionally, refreshing the page also adds to the count.\nAdd to the page Next is adding the Badge to the page. I chose to place it below the footer text. Claude Code handled this part; hereâ€™s its own summary of the work.\nStep 1: Config separation Separate the visitor badge from the footer text and configure it in hugo.yaml:\nLocation: hugo.yaml\nfooter: text: \"footer text here.\" visitorsImage: \"https://visitor-badge.laobi.icu/badge?page_id=\" Add a new visitorsImage param to store the badge URL Keep the footer text clean Step 2: Theme extension Modify the extend_footer.html of the PaperMod theme to display the badge:\nLocation: themes/PaperMod/layouts/partials/extend_footer.html\n{{- if .Site.Params.visitorsImage -}} \u003cdiv style=\"text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;\"\u003e \u003cimg src=\"{{ .Site.Params.visitorsImage }}\" alt=\"visitors\" style=\"max-width: 120px; height: auto;\" /\u003e \u003c/div\u003e {{- end -}} {{- if .Site.Params.visitorsImage -}}: Conditional display; only show when visitorsImage is set {{ .Site.Params.visitorsImage }}: Read the param from hugo.yaml {{- -}}: Trim extra whitespace text-align: center: Center align text width: 100%: Container takes full width display: flex; justify-content: center: Flexbox to center horizontally margin-top: 10px; margin-bottom: 20px: Space around the footer, leave some bottom padding max-width: 120px: Limit badge max width to avoid oversized display height: auto: Keep aspect ratio Notes Theme updates: If you update PaperMod, youâ€™ll need to reapply the extend_footer.html changes Third-party dependency: Relies on an external stats service; if itâ€™s down, youâ€™ll see a broken image Privacy: Visitor stats collect access data; make sure it aligns with your privacy policy ",
  "wordCount" : "994",
  "inLanguage": "en",
  "image": "https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp","datePublished": "2025-08-04T02:00:00+08:00",
  "dateModified": "2025-08-04T02:00:00+08:00",
  "author":{
    "@type": "Person",
    "name": "Jack"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jackchou.top/en/posts/badge-and-blog-workflow/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ğŸ¡JacksBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jackchou.top/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jackchou.top/en/" accesskey="h" title="ğŸ¡JacksBlog (Alt + H)">ğŸ¡JacksBlog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://jackchou.top/" title="ä¸­æ–‡"
                            aria-label="ä¸­æ–‡">ä¸­æ–‡</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jackchou.top/en/posts/" title="Posts ğŸŒ³">
                    <span>Posts ğŸŒ³</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/en/photos/" title="Photos ğŸ“·">
                    <span>Photos ğŸ“·</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/en/tags/" title="Tags ğŸ·ï¸">
                    <span>Tags ğŸ·ï¸</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/en/about/" title="About ğŸ˜¼">
                    <span>About ğŸ˜¼</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Add a Little Gadget, and Talk About How I Update My Articles
    </h1>
    <div class="post-meta"><span title='2025-08-04 02:00:00 +0800 +0800'>2025.08.04</span>&nbsp;Â·&nbsp;Jack&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="https://jackchou.top/posts/badge-and-blog-workflow/">ä¸­æ–‡</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#how-i-update" aria-label="How I update">How I update</a><ul>
                        
                <li>
                    <a href="#github-actions" aria-label="Github Actions">Github Actions</a></li>
                <li>
                    <a href="#draft" aria-label="Draft">Draft</a></li>
                <li>
                    <a href="#llm-post-processing" aria-label="LLM post-processing">LLM post-processing</a></li></ul>
                </li>
                <li>
                    <a href="#a-badge-for-visitor-stats" aria-label="A Badge for visitor stats">A Badge for visitor stats</a><ul>
                        
                <li>
                    <a href="#source" aria-label="Source">Source</a></li>
                <li>
                    <a href="#add-to-the-page" aria-label="Add to the page">Add to the page</a><ul>
                        
                <li>
                    <a href="#step-1-config-separation" aria-label="Step 1: Config separation">Step 1: Config separation</a></li>
                <li>
                    <a href="#step-2-theme-extension" aria-label="Step 2: Theme extension">Step 2: Theme extension</a></li>
                <li>
                    <a href="#notes" aria-label="Notes">Notes</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="how-i-update">How I update<a hidden class="anchor" aria-hidden="true" href="#how-i-update">#</a></h2>
<p>Hugo is a tool that converts Markdown files into static HTML pages. In theory, you just create or edit Markdown, then run <code>hugo</code> and itâ€™s done. In practice, there are some tiny details worth sharing.</p>
<h3 id="github-actions">Github Actions<a hidden class="anchor" aria-hidden="true" href="#github-actions">#</a></h3>
<p>For convenience, my blog uses two repos: one stores Markdown and the Hugo theme and other files; the other stores the generated site files (i.e., Github Pages). The first repo has Github Actions that run the hugo command, build static pages, then push to the second repo.</p>
<p>The Action is triggered whenever commits are pushed to the main branch. Each run takes about a minute. With 3,000 Action minutes per month on Github, Iâ€™ll never run out.</p>
<h3 id="draft">Draft<a hidden class="anchor" aria-hidden="true" href="#draft">#</a></h3>
<p>Sometimes a post is half-written or I donâ€™t want to publish it yet. In that case I set draft to true in the front matter, so hugo wonâ€™t build it. But if itâ€™s in main, it still triggers the Actionâ€”even though nothing changes. So I made a draft branch to keep those posts. That way I can use Git like cloud sync and also avoid triggering the Action.</p>
<h3 id="llm-post-processing">LLM post-processing<a hidden class="anchor" aria-hidden="true" href="#llm-post-processing">#</a></h3>
<p>After I finish the draft, Iâ€™ll have AI read and check itâ€”like spotting typos, checking fluency, and giving suggestions (which I mostly skim, or let models like GPT-4o say some nice words). If I havenâ€™t written the summary, description, or even the title yet, Iâ€™ll ask it for optionsâ€”though most of the time theyâ€™re not that useful.</p>
<p>I use GPT 4.1 for this step. Stronger models are fine too, but LLMs aren&rsquo;t great at precisely controlling the word count of the generated text.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>è¾“å…¥å°†ä¼šæ˜¯å®Œæ•´çš„ markdownï¼Œæ˜¯ç”±ç®€ä½“ä¸­æ–‡åˆ›ä½œçš„ä¸ªäººåšå®¢çš„ä¸€ç¯‡æ–‡ç« ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ä½ éœ€è¦é¦–å…ˆæŸ¥çœ‹æ˜¯å¦å­˜åœ¨é”™åˆ«å­—ã€é”™è¯¯çš„ç”¨è¯å’Œç”¨è¯­ï¼Œè¡¨è¿°ä¸æ¸…æ™°ï¼Œä¸é€šé¡ºçš„åœ°æ–¹ã€‚æ¸…æ™°çš„æŒ‡å‡ºåœ¨ä½•å¤„ã€æœ‰ä»€ä¹ˆé—®é¢˜ã€å¦‚ä½•ä¿®æ”¹ã€‚æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ªäººåšå®¢ï¼Œé€‚å½“çš„å£è¯­åŒ–æ˜¯å¯æ¥å—çš„ï¼Œä½†ä¸èƒ½å†’çŠ¯ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ç„¶åï¼Œä½ éœ€è¦ç»“åˆä½ çš„çŸ¥è¯†å’Œç†è§£ï¼Œä»”ç»†çš„é˜…è¯»æ–‡ç« å†…å®¹ï¼Œç»™å‡ºä¸€äº›å†…å®¹ä¸Šçš„å»ºè®®å’Œè¯»åæ„Ÿã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>æœ€åï¼Œä½ éœ€è¦ç»“åˆå†…å®¹å’Œä½ çš„ç†è§£ï¼Œç»™å‡ºå‡ ä¸ª front éƒ¨åˆ†çš„ titleï¼Œsummary å’Œ description çš„å¤‡é€‰é¡¹ï¼Œç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> titleï¼šè¿™å°†æ˜¯æ˜¾ç¤ºåœ¨æ–‡ç« åˆ—è¡¨ä¸­å’Œæ–‡ç« é¡¶éƒ¨çš„â€œæ ‡é¢˜â€ï¼Œæœ€å¥½ä¸è¶…è¿‡ 25 ä¸ªæ±‰å­—ã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> summaryï¼šè¿™å°†æ˜¯æ˜¾ç¤ºåœ¨æ–‡ç« åˆ—è¡¨ä¸­ï¼Œæ ‡é¢˜ä¸‹æ–¹çš„æ–‡ç« â€œæ€»ç»“â€æˆ–â€œå‰¯æ ‡é¢˜â€ï¼Œæ—¢è¡¥å……è¯´æ˜æ ‡é¢˜ï¼Œåˆä»£è¡¨æ–‡ç« å†…å®¹ï¼Œæœ€å¥½ä¸è¶…è¿‡ 50 ä¸ªæ±‰å­—ã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> descriptionï¼šè¿™å°†æ˜¾ç¤ºåœ¨æ–‡ç« é¡µé¢çš„æ ‡é¢˜ä¸‹æ–¹ç¬¬ä¸€æ®µï¼Œæ˜¯â€œæ‘˜è¦â€ï¼Œæ˜¯å¼€å¤´å’Œé¢„å‘Šå…¨æ–‡ã€‚æœ€å¥½ä¸è¶…è¿‡ 80 ä¸ªæ±‰å­—ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ä»¥åŠï¼Œç»™å‡ºä¸€ä¸ªæ–‡ä»¶åï¼Œå®ƒå°†ä½œä¸ºè¯¥æ–‡ç« çš„ URLï¼Œæ¯”å¦‚ xxx.mdï¼Œå°†ä¼šæˆä¸º baseURL/posts/xxx
</span></span></code></pre></div><p>After the Chinese version is done, for a bit of internationalization, I also generate an English version. In Hugo, you just create a file with the same name <code>xxx.en.md</code>. The English draft is also written by an LLM. If the post is about color science, Iâ€™ll provide a glossary to help the AI with terms. Aside from a few similar terms (which we often donâ€™t strictly distinguish anyway), larger models translate quite well. Good options include Gemini 2.5 Pro and DeepSeek R1-0528; the latter sometimes gives better translation quality, but it may alter format and paragraphs. After translating, Iâ€™ll read it once and make small edits if I have time.</p>
<blockquote>
<p>Recentlt, A model named Horizon on OpenRouter also works very well for this task. Update: Horizon appears to be gpt-5-mini, while gpt-5 performs relatively well on both tasks.</p>
</blockquote>
<p>Hereâ€™s the prompt I use. Supposedly, for reasoning models, a clear prompt is enough, you donâ€™t need a super complicated one:</p>
<blockquote>
<p>I found that OpenAI has a <a href="https://platform.openai.com/chat/edit?optimize=true">Prompt Optimizer</a>. Itâ€™s kind of like ByteDanceâ€™s old Prompt Pilot. Here is a prompt tuned for GPT-5 but works fine with other models too.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>è¾“å…¥å†…å®¹ä¸ºå®Œæ•´çš„ Markdownï¼Œå†…å®¹ä¸ºç®€ä½“ä¸­æ–‡åˆ›ä½œçš„ä¸ªäººåšå®¢æ–‡ç« ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ä½ çš„ä»»åŠ¡æ˜¯å°†å†…å®¹ç¿»è¯‘ä¸ºè‹±æ–‡ï¼Œç”Ÿæˆå¯¹åº”çš„è‹±æ–‡ç‰ˆæœ¬ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>è¦æ±‚ï¼š
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">1.</span> ä¿æŒåŸæœ‰æ ¼å¼å’Œæ®µè½å®Œå…¨ä¸å˜ã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">2.</span> è¯‘æ–‡è¡¨è¾¾éœ€è‡ªç„¶ã€è´´è¿‘æ—¥å¸¸ä¹ æƒ¯ï¼Œé¿å…ç”Ÿåƒ»æˆ–ä¸å¸¸ç”¨è¡¨è¾¾ã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">3.</span> ä¿æŒ Markdown è¯­æ³•ï¼Œå›¾ç‰‡é“¾æ¥å’Œä»£ç éƒ¨åˆ†åªéœ€ç¿»è¯‘å›¾ç‰‡æè¿°å’Œæ³¨é‡Šã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">4.</span> ä¿æŒåŸæ–‡è¯­æ°”å’Œé£æ ¼ï¼Œç½‘ç»œç”¨è¯­å’Œä¿šè¯­éœ€å‡†ç¡®å¯¹åº”ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>åœ¨å¼€å§‹ç¿»è¯‘å‰ï¼Œç”Ÿæˆä¸€ä»½ 3-5 æ­¥çš„ç®€è¦ä»»åŠ¡æ¸…å•ã€‚
</span></span><span style="display:flex;"><span>ç¿»è¯‘å®Œæˆåä»…è¾“å‡ºè‹±æ–‡å†…å®¹ï¼Œä¾¿äºç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œæ— éœ€åŒ…å«å…¶ä»–ä¿¡æ¯ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>é‡åˆ°ä¸“ä¸šæœ¯è¯­æ—¶ï¼Œä»¥ä¸‹æ˜¯ä¾›ä½ å‚è€ƒçš„è¯å…¸ï¼š
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> äº®åº¦ï¼šLuminance
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> æ˜åº¦ï¼šLightness
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> è§†æ˜åº¦ï¼šBrightness
</span></span></code></pre></div><p>Sometimes you need to update a post after it&rsquo;s published. After adding or editing the Chinese version, how do you update it while keeping everything else unchanged, and still make the updates blend in naturally? A one-shot chat with an LLM usually wonâ€™t cut it. The best way is to lean on an agent, such as GitHub Copilot or Codex, with a tiny bit of guidance.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>ä½¿ç”¨ <span style="color:#e6db74">`git diff`</span> æ£€æŸ¥æˆ‘å¯¹æ–‡ä»¶ <span style="color:#e6db74">`ccontent\posts\badge-and-blog-workflow.md`</span> åšçš„æ›´æ”¹ï¼Œä¾æ®ä»¥ä¸‹è§„åˆ™ï¼Œå°†ä¿®æ”¹åŒæ­¥åˆ°è‹±æ–‡ç‰ˆçš„æ–‡ç« ä¸­ <span style="color:#e6db74">`content\posts\badge-and-blog-workflow.en.md`</span>ï¼Œåªä¿®æ”¹æœ‰æ”¹åŠ¨çš„éƒ¨åˆ†ï¼Œä¿æŒå…¶ä»–éƒ¨åˆ†ä¸å˜ï¼Œè¦æ±‚é£æ ¼ä¸åŸæœ¬æ¥è¿‘ã€‚
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ç¿»è¯‘è§„åˆ™ï¼š
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">1.</span> ä¿æŒæ ¼å¼å’Œæ®µè½ä¸¥æ ¼ä¸å˜ã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">2.</span> æ³¨æ„ç”¨è¯­å’Œç”¨è¯ï¼Œä¸è¦å‡ºç°ç”Ÿåƒ»çš„å•è¯ï¼Œç¬¦åˆæ—¥å¸¸ä¹ æƒ¯ã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">3.</span> ä¿æŒ markdown è¯­æ³•ï¼Œå›¾ç‰‡é“¾æ¥ã€ä»£ç éƒ¨åˆ†åªè¦ç¿»è¯‘å›¾ç‰‡æè¿°å’Œæ³¨é‡Šã€‚
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">4.</span> ä¿æŒè¯­æ°”ï¼Œä½¿ç”¨çš„ä¿šè¯­å’Œç½‘ç»œç”¨è¯­éœ€è¦å‡†ç¡®çš„ç¿»è¯‘ã€‚
</span></span></code></pre></div><p>It will read the files, run commands to view the diffs, and accurately translate only the changed parts.</p>
<h2 id="a-badge-for-visitor-stats">A Badge for visitor stats<a hidden class="anchor" aria-hidden="true" href="#a-badge-for-visitor-stats">#</a></h2>
<h3 id="source">Source<a hidden class="anchor" aria-hidden="true" href="#source">#</a></h3>
<p>Found this little gadget while surfing: show visitor counts through a Badge, like on <a href="https://llm-red-team.github.io/free-api/freeapi/">this site</a>. Did some digging and found itâ€™s just an image; each load increments a counter by 1.</p>
<p>The image comes from <a href="https://visitor-badge.laobi.icu/">visitor-badge.laobi.icu</a>, a free service. You only need an image URL.</p>
<p>The image link format is below. Replace <code>page.id</code> with a unique string. Iâ€™m using <code>jacksblog</code> nowâ€”just avoid collisions. Super convenient. To reset the count, just swap in a new string.</p>
<p><a href="https://visitor-badge.laobi.icu/badge?page_id=page.id">https://visitor-badge.laobi.icu/badge?page_id=page.id</a></p>
<p>Of course, this is just a fun toy. Every image load increments the counter. If you add it to the footer like I did, it shows on every page. This way, from visiting the homepage, to entering the article list, to opening a specific article, the counter might increase three times. Additionally, refreshing the page also adds to the count.</p>
<h3 id="add-to-the-page">Add to the page<a hidden class="anchor" aria-hidden="true" href="#add-to-the-page">#</a></h3>
<p>Next is adding the Badge to the page. I chose to place it below the footer text. Claude Code handled this part; hereâ€™s its own summary of the work.</p>
<h4 id="step-1-config-separation">Step 1: Config separation<a hidden class="anchor" aria-hidden="true" href="#step-1-config-separation">#</a></h4>
<p>Separate the visitor badge from the footer text and configure it in <code>hugo.yaml</code>:</p>
<p>Location: <code>hugo.yaml</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">footer</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">text</span>: <span style="color:#e6db74">&#34;footer text here.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">visitorsImage</span>: <span style="color:#e6db74">&#34;https://visitor-badge.laobi.icu/badge?page_id=&#34;</span>
</span></span></code></pre></div><ul>
<li>Add a new <code>visitorsImage</code> param to store the badge URL</li>
<li>Keep the footer text clean</li>
</ul>
<h4 id="step-2-theme-extension">Step 2: Theme extension<a hidden class="anchor" aria-hidden="true" href="#step-2-theme-extension">#</a></h4>
<p>Modify the <code>extend_footer.html</code> of the PaperMod theme to display the badge:</p>
<p>Location: <code>themes/PaperMod/layouts/partials/extend_footer.html</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- if .Site.Params.visitorsImage -}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Site.Params.visitorsImage }}&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;visitors&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;max-width: 120px; height: auto;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span></code></pre></div><ul>
<li><code>{{- if .Site.Params.visitorsImage -}}</code>: Conditional display; only show when visitorsImage is set</li>
<li><code>{{ .Site.Params.visitorsImage }}</code>: Read the param from hugo.yaml</li>
<li><code>{{- -}}</code>: Trim extra whitespace</li>
<li><code>text-align: center</code>: Center align text</li>
<li><code>width: 100%</code>: Container takes full width</li>
<li><code>display: flex; justify-content: center</code>: Flexbox to center horizontally</li>
<li><code>margin-top: 10px; margin-bottom: 20px</code>: Space around the footer, leave some bottom padding</li>
<li><code>max-width: 120px</code>: Limit badge max width to avoid oversized display</li>
<li><code>height: auto</code>: Keep aspect ratio</li>
</ul>
<h4 id="notes">Notes<a hidden class="anchor" aria-hidden="true" href="#notes">#</a></h4>
<ol>
<li>Theme updates: If you update PaperMod, youâ€™ll need to reapply the extend_footer.html changes</li>
<li>Third-party dependency: Relies on an external stats service; if itâ€™s down, youâ€™ll see a broken image</li>
<li>Privacy: Visitor stats collect access data; make sure it aligns with your privacy policy</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://jackchou.top/en/tags/hugo/">Hugo</a></li>
      <li><a href="https://jackchou.top/en/tags/code/">Code</a></li>
      <li><a href="https://jackchou.top/en/tags/papermod/">PaperMod</a></li>
      <li><a href="https://jackchou.top/en/tags/anything/">Anything</a></li>
      <li><a href="https://jackchou.top/en/tags/llm/">LLM</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jackchou.top/en/">ğŸ¡JacksBlog</a></span> Â· 
        my friends&rsquo; websites: <a href="https://zhxwu.com/">zhxwu.com</a>, <a href="https://ylqian.com/">ylqian.com</a> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div style="text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;">
    <img src="https://visitor-badge.laobi.icu/badge?page_id=jacksblog" alt="visitors" style="max-width: 120px; height: auto;" />
</div>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
