<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>加个小玩意儿，随便聊聊 | 🏡JacksBlog</title>
<meta name="keywords" content="Hugo, Code, PaperMod, Anything">
<meta name="description" content="通过一个 Badge 粗略地显示访客数，顺便聊聊我更新博客的大致流程">
<meta name="author" content="">
<link rel="canonical" href="https://jackchou.top/posts/badge-and-blog-workflow/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7661776b18b3ce31a740dd6e5be11f84f6e3f987238493cf541cd274acdb2612.css" integrity="sha256-dmF3axizzjGnQN1uW&#43;EfhPbj&#43;YcjhJPPVBzSdKzbJhI=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jackchou.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jackchou.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jackchou.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jackchou.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://jackchou.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://jackchou.top/posts/badge-and-blog-workflow/">
<link rel="alternate" hreflang="en" href="https://jackchou.top/en/posts/badge-and-blog-workflow/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js" integrity="sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Noto+Sans+SC:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">


<style>
#domain-migration-notice {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 12px 20px;
  text-align: center;
  z-index: 1000;
  font-size: 14px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  display: none;
}

#domain-migration-notice.show {
  display: block;
}

#domain-migration-notice .notice-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
}

#domain-migration-notice .notice-text {
  flex: 1;
  text-align: center;
}

#domain-migration-notice .close-btn {
  background: rgba(255,255,255,0.2);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: background-color 0.3s;
}

#domain-migration-notice .close-btn:hover {
  background: rgba(255,255,255,0.3);
}

#domain-migration-notice a {
  color: #ffeb3b;
  text-decoration: underline;
}

body.notice-shown {
  padding-top: 60px;
}

@media (max-width: 768px) {
  #domain-migration-notice {
    padding: 10px 15px;
    font-size: 13px;
  }
  
  #domain-migration-notice .notice-content {
    flex-direction: column;
    gap: 8px;
  }
  
  body.notice-shown {
    padding-top: 80px;
  }
}
</style>

<script>
(function() {
  
  const expiryDate = new Date('2025-10-31');
  const now = new Date();
  
  if (now > expiryDate) {
    return; 
  }
  
  
  if (localStorage.getItem('domain-migration-dismissed') === 'true') {
    return;
  }
  
  
  const noticeHTML = `
    <div id="domain-migration-notice">
      <div class="notice-content">
        <div class="notice-text">
          <span class="zh-notice" style="display: none;">
            👋 再见，jackchou00.icu    🚀 新的旅途，从 <a href="https://jackchou.top">jackchou.top</a> 起程
          </span>
          <span class="en-notice" style="display: none;">
            👋 Goodbye, jackchou00.icu    🚀 A new chapter will begin at <a href="https://jackchou.top">jackchou.top</a>
          </span>
        </div>
        <button class="close-btn" onclick="dismissNotice()">✕</button>
      </div>
    </div>
  `;
  
  
  document.addEventListener('DOMContentLoaded', function() {
    
    document.body.insertAdjacentHTML('afterbegin', noticeHTML);
    
    
    const isEnglish = document.documentElement.lang === 'en' || window.location.pathname.startsWith('/en/');
    const zhNotice = document.querySelector('.zh-notice');
    const enNotice = document.querySelector('.en-notice');
    
    if (isEnglish && enNotice) {
      enNotice.style.display = 'inline';
    } else if (zhNotice) {
      zhNotice.style.display = 'inline';
    }
    
    
    const notice = document.getElementById('domain-migration-notice');
    if (notice) {
      notice.classList.add('show');
      document.body.classList.add('notice-shown');
    }
  });
  
  
  window.dismissNotice = function() {
    const notice = document.getElementById('domain-migration-notice');
    if (notice) {
      notice.style.display = 'none';
      document.body.classList.remove('notice-shown');
      localStorage.setItem('domain-migration-dismissed', 'true');
    }
  };
})();
</script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4dc1311d77d6840123f21aa2f8a31c84";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><meta property="og:url" content="https://jackchou.top/posts/badge-and-blog-workflow/">
  <meta property="og:site_name" content="🏡JacksBlog">
  <meta property="og:title" content="加个小玩意儿，随便聊聊">
  <meta property="og:description" content="通过一个 Badge 粗略地显示访客数，顺便聊聊我更新博客的大致流程">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-04T02:00:00+08:00">
    <meta property="article:modified_time" content="2025-08-04T02:00:00+08:00">
    <meta property="article:tag" content="Hugo">
    <meta property="article:tag" content="Code">
    <meta property="article:tag" content="PaperMod">
    <meta property="article:tag" content="Anything">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="加个小玩意儿，随便聊聊">
<meta name="twitter:description" content="通过一个 Badge 粗略地显示访客数，顺便聊聊我更新博客的大致流程">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文章 🌳",
      "item": "https://jackchou.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "加个小玩意儿，随便聊聊",
      "item": "https://jackchou.top/posts/badge-and-blog-workflow/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "加个小玩意儿，随便聊聊",
  "name": "加个小玩意儿，随便聊聊",
  "description": "通过一个 Badge 粗略地显示访客数，顺便聊聊我更新博客的大致流程",
  "keywords": [
    "Hugo", "Code", "PaperMod", "Anything"
  ],
  "articleBody": "我如何更新 Hugo 是一个能将 Markdown 文件转换成 HTML 静态页面的工具，理论上只要新建或者修改 Markdown，然后运行一下 hugo 就更新好了。不过实践里，有一些非常细节的东西可以分享。\nGithub Actions 方便起见，我的博客由两个仓库组成，一个存放 Markdown 和 Hugo 的主题等文件，另一个放生成的页面文件，也就是 Github Pages，第一个仓库里有 Github Actions ，运行 hugo 命令，生成静态页面再 push 到第二个仓库。\n这个 Action 的触发条件是当 main 分支有提交被推送时，运行一次 Action 大概要一分钟，Github 每个月三千分钟的 Action 配额肯定是用不完的。\nDraft 有时候文章写了一半，或者暂时没想发布，这时候在 front matter 中将 draft 设置为 true，这样运行 hugo 的时候不会构建这一篇。不过在 main 分支的话仍然会触发 Action，虽然不会有任何变化。所以我设置了一个 draft 分支，用来放这些文章，这样可以把 Git 当云同步用，也不会触发 Action。\nLLM 后处理 大致写完以后，我会让 AI 阅读和检查一下，比如有没有错别字，语言是否通顺，让它提点建议（建议基本都是看看就好，也可以听 GPT-4o 这类模型拍拍马屁）。如果这时候还没有写 summary 和 description 甚至 title，也可以让它给一些备选项，不过多数时候不太可用。\n这一步我用的模型是 GPT 4.1，用更厉害的模型也是没问题的，LLM 不太擅长精确控制生成文本的字数。\n输入将会是完整的 markdown，是由简体中文创作的个人博客的一篇文章。 你需要首先查看是否存在错别字、错误的用词和用语，表述不清晰，不通顺的地方。清晰的指出在何处、有什么问题、如何修改。注意，这是一个个人博客，适当的口语化是可接受的，但不能冒犯。 然后，你需要结合你的知识和理解，仔细的阅读文章内容，给出一些内容上的建议和读后感。 最后，你需要结合内容和你的理解，给出几个 front 部分的 title，summary 和 description 的备选项，符合以下要求： - title：这将是显示在文章列表中和文章顶部的“标题”，最好不超过 25 个汉字。 - summary：这将是显示在文章列表中，标题下方的文章“总结”或“副标题”，既补充说明标题，又代表文章内容，最好不超过 50 个汉字。 - description：这将显示在文章页面的标题下方第一段，是“摘要”，是开头和预告全文。最好不超过 80 个汉字。 以及，给出一个文件名，它将作为该文章的 URL，比如 xxx.md，将会成为 baseURL/posts/xxx 中文版完成之后，为了国际化一点，我还会生成一个英文版本，在 Hugo 里，只需要创建一个同名的文件 xxx.en.md 即可。这个英文版的草稿也是 LLM 写的，如果是涉及色彩科学的文章，可以给一个词典，帮助 AI 翻译术语，除了少数特别类似的词（其实很多时候我们自己也不严格区分），参数量大的模型都能翻译的比较好。比较好用的模型有 Gemini 2.5 Pro 和 DeepSeek R1-0528，后者有时候翻译质量更高，但格式和段落可能会被它改。翻译完之后，有时间的话我会阅读一遍，稍作修改。\n最近 OpenRouter 上的 Horizon 模型也很不错。更新：Horizon 似乎是 gpt-5-mini，而 gpt-5 在这两个任务上表现都比较不错。\n使用的 Prompt 如下，据说推理模型只要 Prompt 给的比较准确就可以，不用那种很复杂的：\n发现 OpenAI 有一个 优化 Prompt 的工具，有点像字节之前的 Prompt Pilot，这是一个针对 GPT-5 优化的 Prompt，也可以用于别的模型。\n输入内容为完整的 Markdown，内容为简体中文创作的个人博客文章。 你的任务是将内容翻译为英文，生成对应的英文版本。 要求： 1. 保持原有格式和段落完全不变。 2. 译文表达需自然、贴近日常习惯，避免生僻或不常用表达。 3. 保持 Markdown 语法，图片链接和代码部分只需翻译图片描述和注释。 4. 保持原文语气和风格，网络用语和俚语需准确对应。 在开始翻译前，生成一份 3-5 步的简要任务清单。 翻译完成后仅输出英文内容，便于直接复制粘贴，无需包含其他信息。 遇到专业术语时，以下是供你参考的词典： - 亮度：Luminance - 明度：Lightness - 视明度：Brightness 有时候，需要后期修改文章，比如对中文版本添加或修改内容。推荐直接手动修改英文版，或者只翻译修改的部分。\n当然，也可以全部交给 LLM 解决，直接翻译一个新的出来，或者希望保留大部分内容不变的话，先用 Git 的 diff 功能生成一个修改记录，然后再使用类似的 Prompt 进行翻译，不过这时候就需要加入新的中文版、老的英文版和标记了差别的文件，比较花费 Token 和考验模型的上下文能力。\ngit diff content/posts/xxx.md \u003e temp.diff 输入： - 一篇最新的中文文章、一个标注出变动的 diff 文件，以及一份较早版本的英文文章。 任务： - 仅依据 diff 文件标注的差异，将中文文章的新改动融入英文文章更新。所有未变动内容需完全保留原英文表述。 规则： 1. 精准保留原有段落格式和结构。 2. 对变动部分进行流畅、地道的英文翻译。 3. 保持 Markdown 语法。仅翻译图片、链接、代码的说明与注释，除非特别要求，否则不应更改代码或 URL。 4. 保持原有语气与风格。根据语境匹配网络和口语化英文表达。 错误处理： - 若缺少任一输入文件（中文文章、diff 文件或英文文章），回复： “错误：缺少必要输入文件。请提供中文文章、diff 文件和英文文章。” - 若 diff 文件变动无法映射到英文文本，回复： “错误：无法将 diff 变更与英文文本对齐。请检查输入内容一致性。” 输出格式 - 英文文章输出：仅最终修订后的英文文章，确保可直接复制粘贴，无其他输出内容。 统计访客数的 Badge 来源 网上冲浪的时候发现的小玩意儿，通过 Badge 来显示访客数目，比如 这个站。研究了一下，发现这是一个图片，加载一次数量计数器就会加 1。\n图片来自 visitor-badge.laobi.icu，是一个免费的服务，只要一个图片链接即可。\n图片链接的格式如下，里面的 page.id 换成唯一的字符串，比如我现在用的是 jacksblog，只要不和别人重复就可以。可以说是非常方便了，重新计数的话换一个字符串就行。\nhttps://visitor-badge.laobi.icu/badge?page_id=page.id 当然，这只是图一乐的小玩具，因为只要加载这个图片，计数器就会加，像我这样把它添加在页脚（footer），那么每个页面都会加载它。这样一来，从访问主页，到进入文章列表，再到点开具体文章，这个过程计数器可能就会增加三次。此外，刷新页面也会导致计数增加。\n添加到页面 接下来是把这个 Badge 加到页面上，我选择的是在 footer 文字的底下，这一部分是 Claude Code 完成的，以下是它自己写的工作总结。\n第一步：配置分离 将 visitor badge 从 footer 文字中分离出来，在hugo.yaml中单独配置：\n文件位置： hugo.yaml\nfooter: text: \"footer text here.\" visitorsImage: \"https://visitor-badge.laobi.icu/badge?page_id=\" 新增visitorsImage参数专门存储 badge URL 保持 footer 文字的简洁性 第二步：主题扩展 修改 PaperMod 主题的extend_footer.html文件来显示 badge：\n文件位置： themes/PaperMod/layouts/partials/extend_footer.html\n{{- if .Site.Params.visitorsImage -}} \u003cdiv style=\"text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;\"\u003e \u003cimg src=\"{{ .Site.Params.visitorsImage }}\" alt=\"visitors\" style=\"max-width: 120px; height: auto;\" /\u003e \u003c/div\u003e {{- end -}} {{- if .Site.Params.visitorsImage -}}：条件判断，只有配置了 visitorsImage 才显示 {{ .Site.Params.visitorsImage }}：读取 hugo.yaml 中的配置参数 {{- -}}：去除多余的空白字符 text-align: center：文本居中对齐 width: 100%：容器占满父元素宽度 display: flex; justify-content: center：Flexbox 布局确保元素水平居中 margin-top: 10px; margin-bottom: 20px：与 footer 保持适当间距，底部留白 max-width: 120px：限制 badge 最大宽度，避免过大显示 height: auto：保持图片比例 注意事项 主题更新：如果更新 PaperMod 主题，需要重新添加 extend_footer.html 的修改 第三方依赖：依赖外部统计服务，如果服务不可用会显示破图 隐私考虑：访客统计会收集用户访问数据，需要符合隐私政策要求 ",
  "wordCount" : "344",
  "inLanguage": "zh-cn",
  "datePublished": "2025-08-04T02:00:00+08:00",
  "dateModified": "2025-08-04T02:00:00+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jackchou.top/posts/badge-and-blog-workflow/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "🏡JacksBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jackchou.top/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jackchou.top/" accesskey="h" title="🏡JacksBlog (Alt + H)">🏡JacksBlog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://jackchou.top/en/" title="English"
                            aria-label="English">En</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jackchou.top/posts/" title="文章 🌳">
                    <span>文章 🌳</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/photos/" title="照片 📷">
                    <span>照片 📷</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/tags/" title="标签 🏷️">
                    <span>标签 🏷️</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/about/" title="关于 😼">
                    <span>关于 😼</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      加个小玩意儿，随便聊聊
    </h1>
    <div class="post-meta"><span title='2025-08-04 02:00:00 +0800 +0800'>2025.08.04</span>&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="https://jackchou.top/en/posts/badge-and-blog-workflow/">En</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%88%91%e5%a6%82%e4%bd%95%e6%9b%b4%e6%96%b0" aria-label="我如何更新">我如何更新</a><ul>
                        
                <li>
                    <a href="#github-actions" aria-label="Github Actions">Github Actions</a></li>
                <li>
                    <a href="#draft" aria-label="Draft">Draft</a></li>
                <li>
                    <a href="#llm-%e5%90%8e%e5%a4%84%e7%90%86" aria-label="LLM 后处理">LLM 后处理</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bb%9f%e8%ae%a1%e8%ae%bf%e5%ae%a2%e6%95%b0%e7%9a%84-badge" aria-label="统计访客数的 Badge">统计访客数的 Badge</a><ul>
                        
                <li>
                    <a href="#%e6%9d%a5%e6%ba%90" aria-label="来源">来源</a></li>
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e5%88%b0%e9%a1%b5%e9%9d%a2" aria-label="添加到页面">添加到页面</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5%e9%85%8d%e7%bd%ae%e5%88%86%e7%a6%bb" aria-label="第一步：配置分离">第一步：配置分离</a></li>
                <li>
                    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5%e4%b8%bb%e9%a2%98%e6%89%a9%e5%b1%95" aria-label="第二步：主题扩展">第二步：主题扩展</a></li>
                <li>
                    <a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" aria-label="注意事项">注意事项</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="我如何更新">我如何更新<a hidden class="anchor" aria-hidden="true" href="#我如何更新">#</a></h2>
<p>Hugo 是一个能将 Markdown 文件转换成 HTML 静态页面的工具，理论上只要新建或者修改 Markdown，然后运行一下 <code>hugo</code> 就更新好了。不过实践里，有一些非常细节的东西可以分享。</p>
<h3 id="github-actions">Github Actions<a hidden class="anchor" aria-hidden="true" href="#github-actions">#</a></h3>
<p>方便起见，我的博客由两个仓库组成，一个存放 Markdown 和 Hugo 的主题等文件，另一个放生成的页面文件，也就是 Github Pages，第一个仓库里有 Github Actions ，运行 hugo 命令，生成静态页面再 push 到第二个仓库。</p>
<p>这个 Action 的触发条件是当 main 分支有提交被推送时，运行一次 Action 大概要一分钟，Github 每个月三千分钟的 Action 配额肯定是用不完的。</p>
<h3 id="draft">Draft<a hidden class="anchor" aria-hidden="true" href="#draft">#</a></h3>
<p>有时候文章写了一半，或者暂时没想发布，这时候在 front matter 中将 draft 设置为 true，这样运行 hugo 的时候不会构建这一篇。不过在 main 分支的话仍然会触发 Action，虽然不会有任何变化。所以我设置了一个 draft 分支，用来放这些文章，这样可以把 Git 当云同步用，也不会触发 Action。</p>
<h3 id="llm-后处理">LLM 后处理<a hidden class="anchor" aria-hidden="true" href="#llm-后处理">#</a></h3>
<p>大致写完以后，我会让 AI 阅读和检查一下，比如有没有错别字，语言是否通顺，让它提点建议（建议基本都是看看就好，也可以听 GPT-4o 这类模型拍拍马屁）。如果这时候还没有写 summary 和 description 甚至 title，也可以让它给一些备选项，不过多数时候不太可用。</p>
<p>这一步我用的模型是 GPT 4.1，用更厉害的模型也是没问题的，LLM 不太擅长精确控制生成文本的字数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>输入将会是完整的 markdown，是由简体中文创作的个人博客的一篇文章。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>你需要首先查看是否存在错别字、错误的用词和用语，表述不清晰，不通顺的地方。清晰的指出在何处、有什么问题、如何修改。注意，这是一个个人博客，适当的口语化是可接受的，但不能冒犯。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>然后，你需要结合你的知识和理解，仔细的阅读文章内容，给出一些内容上的建议和读后感。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>最后，你需要结合内容和你的理解，给出几个 front 部分的 title，summary 和 description 的备选项，符合以下要求：
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> title：这将是显示在文章列表中和文章顶部的“标题”，最好不超过 25 个汉字。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> summary：这将是显示在文章列表中，标题下方的文章“总结”或“副标题”，既补充说明标题，又代表文章内容，最好不超过 50 个汉字。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> description：这将显示在文章页面的标题下方第一段，是“摘要”，是开头和预告全文。最好不超过 80 个汉字。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>以及，给出一个文件名，它将作为该文章的 URL，比如 xxx.md，将会成为 baseURL/posts/xxx
</span></span></code></pre></div><p>中文版完成之后，为了国际化一点，我还会生成一个英文版本，在 Hugo 里，只需要创建一个同名的文件 <code>xxx.en.md</code> 即可。这个英文版的草稿也是 LLM 写的，如果是涉及色彩科学的文章，可以给一个词典，帮助 AI 翻译术语，除了少数特别类似的词（其实很多时候我们自己也不严格区分），参数量大的模型都能翻译的比较好。比较好用的模型有 Gemini 2.5 Pro 和 DeepSeek R1-0528，后者有时候翻译质量更高，但格式和段落可能会被它改。翻译完之后，有时间的话我会阅读一遍，稍作修改。</p>
<blockquote>
<p>最近 OpenRouter 上的 Horizon 模型也很不错。更新：Horizon 似乎是 gpt-5-mini，而 gpt-5 在这两个任务上表现都比较不错。</p>
</blockquote>
<p>使用的 Prompt 如下，据说推理模型只要 Prompt 给的比较准确就可以，不用那种很复杂的：</p>
<blockquote>
<p>发现 OpenAI 有一个 <a href="https://platform.openai.com/chat/edit?optimize=true">优化 Prompt</a> 的工具，有点像字节之前的 Prompt Pilot，这是一个针对 GPT-5 优化的 Prompt，也可以用于别的模型。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>输入内容为完整的 Markdown，内容为简体中文创作的个人博客文章。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>你的任务是将内容翻译为英文，生成对应的英文版本。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>要求：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">1.</span> 保持原有格式和段落完全不变。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">2.</span> 译文表达需自然、贴近日常习惯，避免生僻或不常用表达。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">3.</span> 保持 Markdown 语法，图片链接和代码部分只需翻译图片描述和注释。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">4.</span> 保持原文语气和风格，网络用语和俚语需准确对应。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>在开始翻译前，生成一份 3-5 步的简要任务清单。
</span></span><span style="display:flex;"><span>翻译完成后仅输出英文内容，便于直接复制粘贴，无需包含其他信息。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>遇到专业术语时，以下是供你参考的词典：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 亮度：Luminance
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 明度：Lightness
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 视明度：Brightness
</span></span></code></pre></div><p>有时候，需要后期修改文章，比如对中文版本添加或修改内容。推荐直接手动修改英文版，或者只翻译修改的部分。</p>
<p>当然，也可以全部交给 LLM 解决，直接翻译一个新的出来，或者希望保留大部分内容不变的话，先用 Git 的 <code>diff</code> 功能生成一个修改记录，然后再使用类似的 Prompt 进行翻译，不过这时候就需要加入新的中文版、老的英文版和标记了差别的文件，比较花费 Token 和考验模型的上下文能力。</p>
<pre tabindex="0"><code class="language-git" data-lang="git">git diff content/posts/xxx.md &gt; temp.diff
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>输入：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 一篇最新的中文文章、一个标注出变动的 diff 文件，以及一份较早版本的英文文章。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>任务：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 仅依据 diff 文件标注的差异，将中文文章的新改动融入英文文章更新。所有未变动内容需完全保留原英文表述。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>规则：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">1.</span> 精准保留原有段落格式和结构。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">2.</span> 对变动部分进行流畅、地道的英文翻译。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">3.</span> 保持 Markdown 语法。仅翻译图片、链接、代码的说明与注释，除非特别要求，否则不应更改代码或 URL。
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">4.</span> 保持原有语气与风格。根据语境匹配网络和口语化英文表达。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>错误处理：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 若缺少任一输入文件（中文文章、diff 文件或英文文章），回复：
</span></span><span style="display:flex;"><span>  “错误：缺少必要输入文件。请提供中文文章、diff 文件和英文文章。”
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 若 diff 文件变动无法映射到英文文本，回复：
</span></span><span style="display:flex;"><span>  “错误：无法将 diff 变更与英文文本对齐。请检查输入内容一致性。”
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>输出格式
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> 英文文章输出：仅最终修订后的英文文章，确保可直接复制粘贴，无其他输出内容。
</span></span></code></pre></div><h2 id="统计访客数的-badge">统计访客数的 Badge<a hidden class="anchor" aria-hidden="true" href="#统计访客数的-badge">#</a></h2>
<h3 id="来源">来源<a hidden class="anchor" aria-hidden="true" href="#来源">#</a></h3>
<p>网上冲浪的时候发现的小玩意儿，通过 Badge 来显示访客数目，比如 <a href="https://llm-red-team.github.io/free-api/freeapi/">这个站</a>。研究了一下，发现这是一个图片，加载一次数量计数器就会加 1。</p>
<p>图片来自 <a href="https://visitor-badge.laobi.icu/">visitor-badge.laobi.icu</a>，是一个免费的服务，只要一个图片链接即可。</p>
<p>图片链接的格式如下，里面的 <code>page.id</code> 换成唯一的字符串，比如我现在用的是 <code>jacksblog</code>，只要不和别人重复就可以。可以说是非常方便了，重新计数的话换一个字符串就行。</p>
<pre tabindex="0"><code>https://visitor-badge.laobi.icu/badge?page_id=page.id
</code></pre><p>当然，这只是图一乐的小玩具，因为只要加载这个图片，计数器就会加，像我这样把它添加在页脚（footer），那么每个页面都会加载它。这样一来，从访问主页，到进入文章列表，再到点开具体文章，这个过程计数器可能就会增加三次。此外，刷新页面也会导致计数增加。</p>
<h3 id="添加到页面">添加到页面<a hidden class="anchor" aria-hidden="true" href="#添加到页面">#</a></h3>
<p>接下来是把这个 Badge 加到页面上，我选择的是在 footer 文字的底下，这一部分是 Claude Code 完成的，以下是它自己写的工作总结。</p>
<h4 id="第一步配置分离">第一步：配置分离<a hidden class="anchor" aria-hidden="true" href="#第一步配置分离">#</a></h4>
<p>将 visitor badge 从 footer 文字中分离出来，在<code>hugo.yaml</code>中单独配置：</p>
<p>文件位置： <code>hugo.yaml</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">footer</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">text</span>: <span style="color:#e6db74">&#34;footer text here.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">visitorsImage</span>: <span style="color:#e6db74">&#34;https://visitor-badge.laobi.icu/badge?page_id=&#34;</span>
</span></span></code></pre></div><ul>
<li>新增<code>visitorsImage</code>参数专门存储 badge URL</li>
<li>保持 footer 文字的简洁性</li>
</ul>
<h4 id="第二步主题扩展">第二步：主题扩展<a hidden class="anchor" aria-hidden="true" href="#第二步主题扩展">#</a></h4>
<p>修改 PaperMod 主题的<code>extend_footer.html</code>文件来显示 badge：</p>
<p>文件位置： <code>themes/PaperMod/layouts/partials/extend_footer.html</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- if .Site.Params.visitorsImage -}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .Site.Params.visitorsImage }}&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;visitors&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;max-width: 120px; height: auto;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span></code></pre></div><ul>
<li><code>{{- if .Site.Params.visitorsImage -}}</code>：条件判断，只有配置了 visitorsImage 才显示</li>
<li><code>{{ .Site.Params.visitorsImage }}</code>：读取 hugo.yaml 中的配置参数</li>
<li><code>{{- -}}</code>：去除多余的空白字符</li>
<li><code>text-align: center</code>：文本居中对齐</li>
<li><code>width: 100%</code>：容器占满父元素宽度</li>
<li><code>display: flex; justify-content: center</code>：Flexbox 布局确保元素水平居中</li>
<li><code>margin-top: 10px; margin-bottom: 20px</code>：与 footer 保持适当间距，底部留白</li>
<li><code>max-width: 120px</code>：限制 badge 最大宽度，避免过大显示</li>
<li><code>height: auto</code>：保持图片比例</li>
</ul>
<h4 id="注意事项">注意事项<a hidden class="anchor" aria-hidden="true" href="#注意事项">#</a></h4>
<ol>
<li>主题更新：如果更新 PaperMod 主题，需要重新添加 extend_footer.html 的修改</li>
<li>第三方依赖：依赖外部统计服务，如果服务不可用会显示破图</li>
<li>隐私考虑：访客统计会收集用户访问数据，需要符合隐私政策要求</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://jackchou.top/tags/hugo/">Hugo</a></li>
      <li><a href="https://jackchou.top/tags/code/">Code</a></li>
      <li><a href="https://jackchou.top/tags/papermod/">PaperMod</a></li>
      <li><a href="https://jackchou.top/tags/anything/">Anything</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jackchou.top/">🏡JacksBlog</a></span> · 
        my friends&rsquo; websites: <a href="https://zhxwu.com/">zhxwu.com</a>, <a href="https://ylqian.com/">ylqian.com</a> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div style="text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;">
    <img src="https://visitor-badge.laobi.icu/badge?page_id=jacksblog" alt="visitors" style="max-width: 120px; height: auto;" />
</div>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
