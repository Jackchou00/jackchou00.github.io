<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>赶个时髦：X2D II 100C 文件格式浅析 | 🏡JacksBlog</title>
<meta name="keywords" content="Colour, HDR, Camera, UltraHDR">
<meta name="description" content="昨天写完的 UltraHDR 文章，没想到今天 X2D II 发布就用上了">
<meta name="author" content="Jack">
<link rel="canonical" href="https://jackchou.top/posts/x2dii-preview/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bb4e9ae2e440bccf3cb7d24276f41ff835376bf2c78193c51417a098608382c4.css" integrity="sha256-u06a4uRAvM88t9JCdvQf&#43;DU3a/LHgZPFFBegmGCDgsQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jackchou.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jackchou.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jackchou.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jackchou.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://jackchou.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://jackchou.top/posts/x2dii-preview/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js" integrity="sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Noto+Sans+SC:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<meta property="og:url" content="https://jackchou.top/posts/x2dii-preview/">
  <meta property="og:site_name" content="🏡JacksBlog">
  <meta property="og:title" content="赶个时髦：X2D II 100C 文件格式浅析">
  <meta property="og:description" content="昨天写完的 UltraHDR 文章，没想到今天 X2D II 发布就用上了">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-26T23:00:00+08:00">
    <meta property="article:modified_time" content="2025-08-26T23:00:00+08:00">
    <meta property="article:tag" content="Colour">
    <meta property="article:tag" content="HDR">
    <meta property="article:tag" content="Camera">
    <meta property="article:tag" content="UltraHDR">
      <meta property="og:image" content="https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp">
<meta name="twitter:title" content="赶个时髦：X2D II 100C 文件格式浅析">
<meta name="twitter:description" content="昨天写完的 UltraHDR 文章，没想到今天 X2D II 发布就用上了">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文章 🌳",
      "item": "https://jackchou.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "赶个时髦：X2D II 100C 文件格式浅析",
      "item": "https://jackchou.top/posts/x2dii-preview/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "赶个时髦：X2D II 100C 文件格式浅析",
  "name": "赶个时髦：X2D II 100C 文件格式浅析",
  "description": "昨天写完的 UltraHDR 文章，没想到今天 X2D II 发布就用上了",
  "keywords": [
    "Colour", "HDR", "Camera", "UltraHDR"
  ],
  "articleBody": "HNCS HDR 的 JPEG 文件格式 我们先把 HNCS HDR 的具体实施细节放一边，看看哈苏是如何选择文件格式来存放 HDR 输出的。\nX2D II 100C 是首款支持端到端 HDR 功能的中画幅相机，可机内直出 HDR HEIF 或 Ultra HDR JPEG 格式照片。\nDPReview 第一时间就发布了 X2D II 的样张画廊，提供了机内直出的 JPG 和 RAW 下载。按照哈苏的说法，这个 JPG 符合 UltraHDR 标准。\n我们来看一下其文件内部的细节：\n文件里有四个完整的 JPEG 结构，它们的分辨率依次是：\n11656x8742，5828x4370，3888x2918，2592x1944。\n其中，第一、三个是 SDR 的图片，另外两个是对应的 Gainmap。而在每个 JPEG 结构的 APP1 中都能找到 XMP 数据包，其格式符合 UltraHDR 规范，具有 Google Container 字段，用于标识 Gainmap 的存在和大小。\n有没有发现这些分辨率都有些奇怪？Gainmap 一般来说是全分辨率或者半分辨率（长宽各一半）的，哈苏为全分辨率 SDR 提供的 Gainmap 短边少了一个像素，长宽比不是严格相同，而为低分辨率 SDR 提供的 Gainmap，长宽是原本的三分之二，是比较少见的。\n在 DPReview 的测评稿中写到：\nThe company says this gives images with up to three additional stops of dynamic range compared to standard sRGB JPEGs, using a technique adopted by Google in its Pixel phones, and by Sigma in its BF Mirrorless camera.\n这里，指的就是 UltraHDR，而这个三档额外的动态范围指的应该是 X2D II 在 Gainmap 的 Metadata 中规范了 HDRCapacityMax = 3，通过 Gainmap 提供至多 3 档的亮度提升。\n除了 UltraHDR 的 XMP 数据包外，该 JPEG 文件中还有 ISO 21496-1 国际标准增益图 HDR 格式所需的各种数据。使其不仅满足 UltraHDR 标准，还是面向未来的国际标准格式，并满足了 UltraHDR v1.1 的要求。\n关于 Gainmap 本身，它只有一个通道，即单通道 Gainmap，只能处理亮度方面的映射，这点比起适马 BF 的三通道 Gainmap 稍显落后。其它元数据上，没有使用常用的 1/64 Offset，而是直接设置成 0，Gamma 为 1，这些都很正常。\n同时，这个 JPEG 文件的颜色空间变成了 Display P3，这点在官网中也有相关说辞：\n为了淋漓尽致地呈现 HDR 的瑰丽光彩，哈苏在 sRGB 的基础上更进一步，将色彩空间拓展至更为广阔的 P3。\nPhocus 中的文件格式 哈苏第一时间更新了 macOS 和 iOS 上的 Phocus 软件，支持了 HDR 的编辑和输出。\n它在官网上提供的样张，从文件命名来看，是经过 Phocus 编辑输出的，而非直出的 JPEG。实际上，当探索了文件具体内容之后，也确实如此，和直出的 JPEG 有很大区别。\n首先，它不再包含可能是用于机内预览的低分辨率图片，只有一个 SDR 图和一个全分辨率的 Gainmap，且这个 Gainmap 是三通道的，Capacity 也不再局限于三档之内，能达到四档以上。\n比较重要的区别是，这个 JPEG 不再有 UltraHDR 结构，它甚至连 XMP 数据包都没有，是一个只有 ISO 21496-1 元数据的文件，使用 MPF 标识 Gainmap 的位置，从这个角度来看，Phocus 中输出面板上写的 UltraHDR ，这种说法是有问题的。\n暂记 相机行业如此重磅的更新，心情非常激动，先把已写的部分与大家分享，稍后会补充图片，有机会能获取更多样张的话，做进一步分析。\n",
  "wordCount" : "1105",
  "inLanguage": "zh-cn",
  "image": "https://img.jackchou.top/jack-img/2025/08/81bb602c03f9704ee42e292468396187.webp","datePublished": "2025-08-26T23:00:00+08:00",
  "dateModified": "2025-08-26T23:00:00+08:00",
  "author":{
    "@type": "Person",
    "name": "Jack"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jackchou.top/posts/x2dii-preview/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "🏡JacksBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jackchou.top/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jackchou.top/" accesskey="h" title="🏡JacksBlog (Alt + H)">🏡JacksBlog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://jackchou.top/en/" title="English"
                            aria-label="English">En</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jackchou.top/posts/" title="文章 🌳">
                    <span>文章 🌳</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/photos/" title="照片 📷">
                    <span>照片 📷</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/tags/" title="标签 🏷️">
                    <span>标签 🏷️</span>
                </a>
            </li>
            <li>
                <a href="https://jackchou.top/about/" title="关于 😼">
                    <span>关于 😼</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      赶个时髦：X2D II 100C 文件格式浅析
    </h1>
    <div class="post-meta"><span title='2025-08-26 23:00:00 +0800 +0800'>2025.08.26</span>&nbsp;·&nbsp;Jack

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#hncs-hdr-%e7%9a%84-jpeg-%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f" aria-label="HNCS HDR 的 JPEG 文件格式">HNCS HDR 的 JPEG 文件格式</a></li>
                <li>
                    <a href="#phocus-%e4%b8%ad%e7%9a%84%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f" aria-label="Phocus 中的文件格式">Phocus 中的文件格式</a></li>
                <li>
                    <a href="#%e6%9a%82%e8%ae%b0" aria-label="暂记">暂记</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="hncs-hdr-的-jpeg-文件格式">HNCS HDR 的 JPEG 文件格式<a hidden class="anchor" aria-hidden="true" href="#hncs-hdr-的-jpeg-文件格式">#</a></h2>
<p>我们先把 HNCS HDR 的具体实施细节放一边，看看哈苏是如何选择文件格式来存放 HDR 输出的。</p>
<blockquote>
<p>X2D II 100C 是首款支持端到端 HDR 功能的中画幅相机，可机内直出 HDR HEIF 或 Ultra HDR JPEG 格式照片。</p>
</blockquote>
<p>DPReview 第一时间就发布了 X2D II 的<a href="https://www.dpreview.com/sample-galleries/4239298554/hasselblad-x2d-ii-100c-sample-gallery">样张画廊</a>，提供了机内直出的 JPG 和 RAW 下载。按照哈苏的说法，这个 JPG 符合 UltraHDR 标准。</p>
<p>我们来看一下其文件内部的细节：</p>
<p>文件里有四个完整的 JPEG 结构，它们的分辨率依次是：</p>
<p>11656x8742，5828x4370，3888x2918，2592x1944。</p>
<p>其中，第一、三个是 SDR 的图片，另外两个是对应的 Gainmap。而在每个 JPEG 结构的 APP1 中都能找到 XMP 数据包，其格式符合 UltraHDR 规范，具有 Google Container 字段，用于标识 Gainmap 的存在和大小。</p>
<p>有没有发现这些分辨率都有些奇怪？Gainmap 一般来说是全分辨率或者半分辨率（长宽各一半）的，哈苏为全分辨率 SDR 提供的 Gainmap 短边少了一个像素，长宽比不是严格相同，而为低分辨率 SDR 提供的 Gainmap，长宽是原本的三分之二，是比较少见的。</p>
<p>在 DPReview 的<a href="https://www.dpreview.com/reviews/hasselblad-x2d-ii-100c-initial-review">测评稿</a>中写到：</p>
<blockquote>
<p>The company says this gives images with up to three additional stops of dynamic range compared to standard sRGB JPEGs, using a technique adopted by Google in its Pixel phones, and by Sigma in its BF Mirrorless camera.</p>
</blockquote>
<p>这里，指的就是 UltraHDR，而这个三档额外的动态范围指的应该是 X2D II 在 Gainmap 的 Metadata 中规范了 <code>HDRCapacityMax = 3</code>，通过 Gainmap 提供至多 3 档的亮度提升。</p>
<p>除了 UltraHDR 的 XMP 数据包外，该 JPEG 文件中还有 ISO 21496-1 国际标准增益图 HDR 格式所需的各种数据。使其不仅满足 UltraHDR 标准，还是面向未来的国际标准格式，并满足了 UltraHDR v1.1 的要求。</p>
<p>关于 Gainmap 本身，它只有一个通道，即单通道 Gainmap，只能处理亮度方面的映射，这点比起适马 BF 的三通道 Gainmap 稍显落后。其它元数据上，没有使用常用的 1/64 <code>Offset</code>，而是直接设置成 0，Gamma 为 1，这些都很正常。</p>
<p>同时，这个 JPEG 文件的颜色空间变成了 Display P3，这点在官网中也有相关说辞：</p>
<blockquote>
<p>为了淋漓尽致地呈现 HDR 的瑰丽光彩，哈苏在 sRGB 的基础上更进一步，将色彩空间拓展至更为广阔的 P3。</p>
</blockquote>
<h2 id="phocus-中的文件格式">Phocus 中的文件格式<a hidden class="anchor" aria-hidden="true" href="#phocus-中的文件格式">#</a></h2>
<p>哈苏第一时间更新了 macOS 和 iOS 上的 Phocus 软件，支持了 HDR 的编辑和输出。</p>
<p>它在<a href="https://www.hasselblad.com/zh-cn/learn/sample-images/x-system/">官网上提供的样张</a>，从文件命名来看，是经过 Phocus 编辑输出的，而非直出的 JPEG。实际上，当探索了文件具体内容之后，也确实如此，和直出的 JPEG 有很大区别。</p>
<p>首先，它不再包含可能是用于机内预览的低分辨率图片，只有一个 SDR 图和一个全分辨率的 Gainmap，且这个 Gainmap 是三通道的，Capacity 也不再局限于三档之内，能达到四档以上。</p>
<p>比较重要的区别是，这个 JPEG 不再有 UltraHDR 结构，它甚至连 XMP 数据包都没有，是一个只有 ISO 21496-1 元数据的文件，使用 MPF 标识 Gainmap 的位置，从这个角度来看，Phocus 中输出面板上写的 UltraHDR ，这种说法是有问题的。</p>
<p><img alt="Phocus 4.0 输出部分" loading="lazy" src="https://img.jackchou.top/jack-img/2025/08/5a55ddd4c8cc4a6f498c1781b7b6c607.avif"></p>
<h2 id="暂记">暂记<a hidden class="anchor" aria-hidden="true" href="#暂记">#</a></h2>
<p>相机行业如此重磅的更新，心情非常激动，先把已写的部分与大家分享，稍后会补充图片，有机会能获取更多样张的话，做进一步分析。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://jackchou.top/tags/colour/">Colour</a></li>
      <li><a href="https://jackchou.top/tags/hdr/">HDR</a></li>
      <li><a href="https://jackchou.top/tags/camera/">Camera</a></li>
      <li><a href="https://jackchou.top/tags/ultrahdr/">UltraHDR</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jackchou.top/">🏡JacksBlog</a></span> · 
        my friends&rsquo; websites: <a href="https://zhxwu.com/">zhxwu.com</a>, <a href="https://ylqian.com/">ylqian.com</a> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div style="text-align: center; margin-top: 10px; margin-bottom: 20px; width: 100%; display: flex; justify-content: center;">
    <img src="https://visitor-badge.laobi.icu/badge?page_id=jacksblog" alt="visitors" style="max-width: 120px; height: auto;" />
</div>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
