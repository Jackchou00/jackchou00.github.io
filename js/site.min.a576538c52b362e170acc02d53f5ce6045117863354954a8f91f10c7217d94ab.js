(()=>{const t=document.getElementById("menu");t&&(t.scrollLeft=Number(localStorage.getItem("menu-scroll-position")||0),t.onscroll=()=>{localStorage.setItem("menu-scroll-position",String(t.scrollLeft))}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const s=this.getAttribute("href");if(!s)return;e.preventDefault();const t=s.substring(1),n=document.querySelector(`[id='${decodeURIComponent(t)}']`);if(!n)return;window.matchMedia("(prefers-reduced-motion: reduce)").matches?n.scrollIntoView():n.scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});const e=document.getElementById("top-link");e&&window.addEventListener("scroll",()=>{document.body.scrollTop>800||document.documentElement.scrollTop>800?(e.style.visibility="visible",e.style.opacity="1"):(e.style.visibility="hidden",e.style.opacity="0")});const n=document.getElementById("theme-toggle");n&&n.addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});const s=document.querySelectorAll(".post-content img");if(s.length){const e=document.createElement("div");e.className="image-lightbox",e.innerHTML='<img class="image-lightbox__img" alt="" />';const t=e.querySelector("img"),n=()=>{e.classList.remove("is-visible"),t?.removeAttribute("src"),document.body.style.removeProperty("overflow")};e.addEventListener("click",n),document.addEventListener("keyup",t=>{t.key==="Escape"&&e.classList.contains("is-visible")&&n()}),document.body.appendChild(e),s.forEach(n=>{n.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const o=n.dataset.zoomSrc||n.currentSrc||n.src,i=o.split("#")[0];t&&(t.src=i,t.alt=n.alt||""),e.classList.add("is-visible"),document.body.style.setProperty("overflow","hidden")})})}})()